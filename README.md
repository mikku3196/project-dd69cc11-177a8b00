# 自己進化型AIポートフォリオ自動売買システム

## プロジェクト概要
Bybit APIとGoogle Gemini APIを核とし、複数の取引戦略を自己最適化させながら並行稼働させる完全自律型の資産運用システム。

## システムアーキテクチャ

```
┌─────────────────────────────────────────────────────────────┐
│                    外部API統合レイヤー                        │
│  Bybit API  │  Gemini API  │  News API  │  Discord API     │
└─────────────────────────────────────────────────────────────┘
                              │
┌─────────────────────────────────────────────────────────────┐
│                    マスターボット (Master Bot)                │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐ │
│  │ ポートフォリオ │ │ リスク管理   │ │ 最適化エンジン │ │ 監視・通知   │ │
│  │ 管理        │ │ サーキット   │ │ バックテスト │ │ Discord     │ │
│  │ リバランス   │ │ ブレーカー   │ │ パラメータ   │ │ ログ管理     │ │
│  └─────────────┘ └─────────────┘ └─────────────┘ └─────────────┘ │
└─────────────────────────────────────────────────────────────┘
                              │
┌─────────────┐ ┌─────────────┐ ┌─────────────┐
│ サブボットA   │ │ サブボットB   │ │ サブボットC   │
│ 安定志向     │ │ バランス重視   │ │ 積極果敢     │
│ ┌─────────┐ │ │ ┌─────────┐ │ │ ┌─────────┐ │
│ │意思決定  │ │ │ │意思決定  │ │ │ │意思決定  │ │
│ │ポジション│ │ │ │ポジション│ │ │ │ポジション│ │
│ │リスク計算│ │ │ │リスク計算│ │ │ │リスク計算│ │
│ └─────────┘ │ │ └─────────┘ │ │ └─────────┘ │
└─────────────┘ └─────────────┘ └─────────────┘
                              │
┌─────────────────────────────────────────────────────────────┐
│                    データ・ユーティリティレイヤー              │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐ │
│  │ データベース   │ │ データ収集   │ │ APIクライアント│ │ Webダッシュ  │ │
│  │ SQLAlchemy  │ │ 価格・ニュース│ │ Bybit/Gemini│ │ ボード      │ │
│  │ Alembic     │ │ センチメント │ │ 非同期通信   │ │ FastAPI     │ │
│  └─────────────┘ └─────────────┘ └─────────────┘ └─────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

## 主要機能

### 1. 意思決定エンジン (Gemini統合)
- 複数APIキーのローテーション
- 構造化されたプロンプト生成
- JSON形式での判断結果
- エラーハンドリングとリトライ機能

### 2. ニュース・センチメント分析
- 複数ニュースソースからの自動収集
- Gemini APIによる感情分析
- 移動平均センチメントスコア計算
- リアルタイム市場心理の定量化

### 3. 動的ポジションサイジング
- ATRベースのボラティリティ適応
- 段階的エントリー（分割売買）
- リスク均等化による資金管理

### 4. 市場フェーズ適応型ポートフォリオ
- 5段階の市場フェーズ判定
- 動的資金配分とリバランス
- 利益確保機能（プロフィット・セービング）

### 5. 学習・最適化エンジン
- 高速バックテスト機能
- グリッドサーチによるパラメータ最適化
- 月次自動チューニング
- 自己進化メカニズム

## 技術スタック

- **言語**: Python 3.10+
- **Web Framework**: FastAPI
- **データベース**: SQLAlchemy + PostgreSQL/SQLite
- **タスクスケジューリング**: APScheduler
- **API通信**: aiohttp, httpx
- **データ分析**: Pandas, NumPy, TA-Lib
- **監視・通知**: Discord.py
- **バージョン管理**: Git

## 開発フェーズ

1. **フェーズ1**: 開発と単体テスト
2. **フェーズ2**: 機械的テスト (Testnet環境)
3. **フェーズ3**: 戦略的フォワードテスト (Paper Trading)
4. **フェーズ4**: 本番稼働 (Mainnet環境)

## セットアップ

```bash
# 依存関係のインストール
pip install -r requirements.txt

# 環境変数の設定
cp .env.example .env
# .envファイルを編集してAPIキーなどを設定

# データベースの初期化
alembic upgrade head

# システムの起動
python main.py
```

## ライセンス
MIT License
